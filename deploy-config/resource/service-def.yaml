models:
  - NtmImage
  - NtmProduct
  - NtmPolicy
  - NtmHospital
  - NtmDepartment
  - NtmRegion
  - NtmRepresentative
  - NtmManagerConfig
  - NtmRepresentativeConfig
  - NtmRegionConfig
  - NtmHospitalConfig
  - NtmProductConfig
  - NtmResourceConfig
  - NtmDestConfig
  - NtmScenario
  - NtmProposal
  - NtmUseableProposal
  - NtmGoodsConfig
  - NtmBusinessinput
  - NtmRepresentativeinput
  - NtmManagerinput
  - NtmPaperinput
  - NtmPaper
  - NtmSalesConfig
  - NtmSalesReport
  - NtmHospitalSalesReport
  - NtmProductSalesReport
  - NtmRepresentativeSalesReport
  - NtmTeamConfig
  - NtmActionKpi
  - NtmPersonnelAssessment
  - NtmRepresentativeAbility
  - NtmLevel
  - NtmLevelConfig
  - NtmAssessmentReportDescribe
  - NtmRegionalDivisionResult
  - NtmTargetAssignsResult
  - NtmResourceAssignsResult
  - NtmManageTimeResult
  - NtmManageTeamResult
  - NtmAssessmentReport
  - NtmTitle
  - NtmGeneralPerformanceResult

storages:
- name: NtmImageStorage
  method: NewImageStorage
  daemons:
  - BmMongodbDaemon
- name: NtmPolicyStorage
  method: NewPolicyStorage
  daemons:
  - BmMongodbDaemon
- name: NtmHospitalStorage
  method: NewHospitalStorage
  daemons:
  - BmMongodbDaemon
- name: NtmDepartmentStorage
  method: NewDepartmentStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRegionStorage
  method: NewRegionStorage
  daemons:
  - BmMongodbDaemon
- name: NtmProductStorage
  method: NewProductStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRepresentativeStorage
  method: NewRepresentativeStorage
  daemons:
  - BmMongodbDaemon
- name: NtmManagerConfigStorage
  method: NewManagerConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRepresentativeConfigStorage
  method: NewRepresentativeConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRegionConfigStorage
  method: NewRegionConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmHospitalConfigStorage
  method: NewHospitalConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmProductConfigStorage
  method: NewProductConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmResourceConfigStorage
  method: NewResourceConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmGoodsConfigStorage
  method: NewGoodsConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmBusinessinputStorage
  method: NewBusinessinputStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRepresentativeinputStorage
  method: NewRepresentativeinputStorage
  daemons:
  - BmMongodbDaemon
- name: NtmManagerinputStorage
  method: NewManagerinputStorage
  daemons:
  - BmMongodbDaemon
- name: NtmPaperinputStorage
  method: NewPaperinputStorage
  daemons:
  - BmMongodbDaemon
- name: NtmDestConfigStorage
  method: NewDestConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmScenarioStorage
  method: NewScenarioStorage
  daemons:
  - BmMongodbDaemon
- name: NtmProposalStorage
  method: NewProposalStorage
  daemons:
  - BmMongodbDaemon
- name: NtmUseableProposalStorage
  method: NewUseableProposalStorage
  daemons:
  - BmMongodbDaemon
- name: NtmPaperStorage
  method: NewPaperStorage
  daemons:
  - BmMongodbDaemon
- name: NtmSalesConfigStorage
  method: NewSalesConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmSalesReportStorage
  method: NewSalesReportStorage
  daemons:
  - BmMongodbDaemon
- name: NtmHospitalSalesReportStorage
  method: NewHospitalSalesReportStorage
  daemons:
  - BmMongodbDaemon
- name: NtmProductSalesReportStorage
  method: NewProductSalesReportStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRepresentativeSalesReportStorage
  method: NewRepresentativeSalesReportStorage
  daemons:
  - BmMongodbDaemon
- name: NtmTeamConfigStorage
  method: NewTeamConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmActionKpiStorage
  method: NewActionKpiStorage
  daemons:
  - BmMongodbDaemon
- name: NtmPersonnelAssessmentStorage
  method: NewPersonnelAssessmentStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRepresentativeAbilityStorage
  method: NewRepresentativeAbilityStorage
  daemons:
  - BmMongodbDaemon
- name: NtmLevelStorage
  method: NewLevelStorage
  daemons:
  - BmMongodbDaemon
- name: NtmLevelConfigStorage
  method: NewLevelConfigStorage
  daemons:
  - BmMongodbDaemon
- name: NtmAssessmentReportDescribeStorage
  method: NewAssessmentReportDescribeStorage
  daemons:
  - BmMongodbDaemon
- name: NtmRegionalDivisionResultStorage
  method: NewRegionalDivisionResultStorage
  daemons:
  - BmMongodbDaemon
- name: NtmTargetAssignsResultStorage
  method: NewTargetAssignsResultStorage
  daemons:
  - BmMongodbDaemon
- name: NtmResourceAssignsResultStorage
  method: NewResourceAssignsResultStorage
  daemons:
  - BmMongodbDaemon
- name: NtmManageTimeResultStorage
  method: NewManageTimeResultStorage
  daemons:
  - BmMongodbDaemon
- name: NtmManageTeamResultStorage
  method: NewManageTeamResultStorage
  daemons:
  - BmMongodbDaemon
- name: NtmAssessmentReportStorage
  method: NewAssessmentReportStorage
  daemons:
  - BmMongodbDaemon
- name: NtmTitleStorage
  method: NewTitleStorage
  daemons:
  - BmMongodbDaemon
- name: NtmGeneralPerformanceResultStorage
  method: NewGeneralPerformanceResultStorage
  daemons:
  - BmMongodbDaemon

resources:
- name: NtmImageResource
  method: NewImageResource
  storages:
  - NtmImageStorage
  - NtmProductStorage
  - NtmHospitalStorage
  - NtmRegionStorage
  - NtmRepresentativeStorage
  - NtmLevelStorage
  - NtmTitleStorage
- name: NtmPolicyResource
  method: NewPolicyResource
  storages:
  - NtmPolicyStorage
  - NtmHospitalConfigStorage
- name: NtmHospitalResource
  method: NewHospitalResource
  storages:
  - NtmHospitalStorage
  - NtmImageStorage
  - NtmHospitalConfigStorage
- name: NtmDepartmentResource
  method: NewDepartmentResource
  storages:
  - NtmDepartmentStorage
  - NtmHospitalConfigStorage
- name: NtmRegionResource
  method: NewRegionResource
  storages:
  - NtmRegionStorage
  - NtmImageStorage
  - NtmRegionConfigStorage
- name: NtmProductResource
  method: NewProductResource
  storages:
  - NtmProductStorage
  - NtmImageStorage
  - NtmProductConfigStorage
- name: NtmRepresentativeResource
  method: NewRepresentativeResource
  storages:
  - NtmRepresentativeStorage
  - NtmImageStorage
  - NtmRepresentativeConfigStorage
  - NtmActionKpiStorage
  - NtmRepresentativeAbilityStorage
- name: NtmManagerConfigResource
  method: NewManagerConfigResource
  storages:
  - NtmManagerConfigStorage
  - NtmResourceConfigStorage
- name: NtmRepresentativeConfigResource
  method: NewRepresentativeConfigResource
  storages:
  - NtmRepresentativeConfigStorage
  - NtmResourceConfigStorage
  - NtmRepresentativeStorage
- name: NtmRegionConfigResource
  method: NewRegionConfigResource
  storages:
  - NtmRegionConfigStorage
  - NtmRegionStorage
  - NtmDestConfigStorage
- name: NtmHospitalConfigResource
  method: NewHospitalConfigResource
  storages:
  - NtmHospitalConfigStorage
  - NtmHospitalStorage
  - NtmPolicyStorage
  - NtmDepartmentStorage
  - NtmDestConfigStorage
- name: NtmProductConfigResource
  method: NewProductConfigResource
  storages:
  - NtmProductConfigStorage
  - NtmGoodsConfigStorage
  - NtmProductStorage
- name: NtmResourceConfigResource
  method: NewResourceConfigResource
  storages:
  - NtmResourceConfigStorage
  - NtmManagerConfigStorage
  - NtmRepresentativeConfigStorage
  - NtmTeamConfigStorage
  - NtmRepresentativeinputStorage
  - NtmBusinessinputStorage
  - NtmRepresentativeSalesReportStorage
  - NtmHospitalSalesReportStorage
- name: NtmGoodsConfigResource
  method: NewGoodsConfigResource
  storages:
  - NtmGoodsConfigStorage
  - NtmProductConfigStorage
  - NtmProductSalesReportStorage
  - NtmHospitalSalesReportStorage
  - NtmRepresentativeSalesReportStorage
  - NtmSalesConfigStorage
  - NtmBusinessinputStorage
- name: NtmBusinessinputResource
  method: NewBusinessinputResource
  storages:
  - NtmBusinessinputStorage
  - NtmPaperinputStorage
- name: NtmRepresentativeinputResource
  method: NewRepresentativeinputResource
  storages:
  - NtmRepresentativeinputStorage
  - NtmPaperinputStorage
- name: NtmManagerinputResource
  method: NewManagerinputResource
  storages:
  - NtmManagerinputStorage
  - NtmPaperinputStorage
- name: NtmPaperinputResource
  method: NewPaperinputResource
  storages:
  - NtmPaperinputStorage
  - NtmBusinessinputStorage
  - NtmRepresentativeinputStorage
  - NtmManagerinputStorage
  - NtmPaperStorage
  - NtmScenarioStorage
- name: NtmDestConfigResource
  method: NewDestConfigResource
  storages:
  - NtmDestConfigStorage
  - NtmHospitalConfigStorage
  - NtmRegionConfigStorage
  - NtmHospitalSalesReportStorage
  - NtmSalesConfigStorage
  - NtmBusinessinputStorage
- name: NtmScenarioResource
  method: NewScenarioResource
  storages:
  - NtmScenarioStorage
  - NtmProposalStorage
  - NtmPaperStorage
  - NtmPaperinputStorage
  - NtmPersonnelAssessmentStorage
  - NtmSalesReportStorage
- name: NtmProposalResource
  method: NewProposalResource
  storages:
  - NtmProposalStorage
  - NtmUseableProposalStorage
- name: NtmUseableProposalResource
  method: NewUseableProposalResource
  storages:
  - NtmUseableProposalStorage
  - NtmProposalStorage
- name: NtmPaperResource
  method: NewPaperResource
  storages:
  - NtmPaperStorage
  - NtmPaperinputStorage
  - NtmSalesReportStorage
  - NtmPersonnelAssessmentStorage
- name: NtmSalesReportResource
  method: NewSalesReportResource
  storages:
  - NtmSalesReportStorage
  - NtmHospitalSalesReportStorage
  - NtmRepresentativeSalesReportStorage
  - NtmProductSalesReportStorage
  - NtmPaperStorage
  - NtmSalesConfigStorage
  - NtmScenarioStorage
  - NtmProposalStorage
- name: NtmSalesConfigResource
  method: NewSalesConfigResource
  storages:
  - NtmSalesConfigStorage
  - NtmPaperStorage
  friendly:
  - NtmSalesReportResource
- name: NtmHospitalSalesReportResource
  method: NewHospitalSalesReportResource
  storages:
  - NtmHospitalSalesReportStorage
  - NtmSalesReportStorage
- name: NtmProductSalesReportResource
  method: NewProductSalesReportResource
  storages:
  - NtmProductSalesReportStorage
  - NtmSalesReportStorage
- name: NtmRepresentativeSalesReportResource
  method: NewRepresentativeSalesReportResource
  storages:
  - NtmRepresentativeSalesReportStorage
  - NtmSalesReportStorage
- name: NtmTeamConfigResource
  method: NewTeamConfigResource
  storages:
  - NtmTeamConfigStorage
  - NtmResourceConfigStorage
- name: NtmPersonnelAssessmentResource
  method: NewPersonnelAssessmentResource
  storages:
  - NtmPersonnelAssessmentStorage
  - NtmPaperStorage
- name: NtmRepresentativeAbilityResource
  method: NewRepresentativeAbilityResource
  storages:
  - NtmRepresentativeAbilityStorage
  - NtmPersonnelAssessmentStorage
- name: NtmActionKpiResource
  method: NewActionKpiResource
  storages:
  - NtmActionKpiStorage
  - NtmPersonnelAssessmentStorage
- name: NtmLevelResource
  method: NewLevelResource
  storages:
  - NtmLevelStorage
  - NtmLevelConfigStorage
- name: NtmLevelConfigResource
  method: NewLevelConfigResource
  storages:
  - NtmLevelConfigStorage
  - NtmRegionalDivisionResultStorage
  - NtmTargetAssignsResultStorage
  - NtmResourceAssignsResultStorage
  - NtmManageTimeResultStorage
  - NtmManageTeamResultStorage
  - NtmGeneralPerformanceResultStorage
- name: NtmAssessmentReportDescribeResource
  method: NewAssessmentReportDescribeResource
  storages:
  - NtmAssessmentReportDescribeStorage
  - NtmRegionalDivisionResultStorage
  - NtmTargetAssignsResultStorage
  - NtmResourceAssignsResultStorage
  - NtmManageTimeResultStorage
  - NtmManageTeamResultStorage
- name: NtmRegionalDivisionResultResource
  method: NewRegionalDivisionResultResource
  storages:
  - NtmRegionalDivisionResultStorage
  - NtmAssessmentReportStorage
- name: NtmTargetAssignsResultResource
  method: NewTargetAssignsResultResource
  storages:
  - NtmTargetAssignsResultStorage
  - NtmAssessmentReportStorage
- name: NtmResourceAssignsResultResource
  method: NewResourceAssignsResultResource
  storages:
  - NtmResourceAssignsResultStorage
  - NtmAssessmentReportStorage
- name: NtmManageTimeResultResource
  method: NewManageTimeResultResource
  storages:
  - NtmManageTimeResultStorage
  - NtmAssessmentReportStorage
- name: NtmManageTeamResultResource
  method: NewManageTeamResultResource
  storages:
  - NtmManageTeamResultStorage
  - NtmAssessmentReportStorage
- name: NtmAssessmentReportResource
  method: NewAssessmentReportResource
  storages:
  - NtmAssessmentReportStorage
  - NtmRegionalDivisionResultStorage
  - NtmTargetAssignsResultStorage
  - NtmResourceAssignsResultStorage
  - NtmManageTimeResultStorage
  - NtmManageTeamResultStorage
  - NtmPaperStorage
- name: NtmTitleResource
  method: NewTitleResource
  storages:
  - NtmTitleStorage
  - NtmLevelConfigStorage
- name: NtmGeneralPerformanceResultResource
  method: NewGeneralPerformanceResultResource
  storages:
  - NtmGeneralPerformanceResultStorage
  - NtmAssessmentReportStorage





services:
- name: ntm-image
  model: NtmImage
  resource: NtmImageResource
- name: ntm-policy
  model: NtmPolicy
  resource: NtmPolicyResource
- name: ntm-hospital
  model: NtmHospital
  resource: NtmHospitalResource
- name: ntm-department
  model: NtmDepartment
  resource: NtmDepartmentResource
- name: ntm-region
  model: NtmRegion
  resource: NtmRegionResource
- name: ntm-product
  model: NtmProduct
  resource: NtmProductResource
- name: ntm-representative
  model: NtmRepresentative
  resource: NtmRepresentativeResource
- name: ntm-managerConfig
  model: NtmManagerConfig
  resource: NtmManagerConfigResource
- name: ntm-representativeConfig
  model: NtmRepresentativeConfig
  resource: NtmRepresentativeConfigResource
- name: ntm-regionConfig
  model: NtmRegionConfig
  resource: NtmRegionConfigResource
- name: ntm-hospitalConfig
  model: NtmHospitalConfig
  resource: NtmHospitalConfigResource
- name: ntm-productConfig
  model: NtmProductConfig
  resource: NtmProductConfigResource
- name: ntm-resourceConfig
  model: NtmResourceConfig
  resource: NtmResourceConfigResource
- name: ntm-goodsConfig
  model: NtmGoodsConfig
  resource: NtmGoodsConfigResource
- name: ntm-Businessinput
  model: NtmBusinessinput
  resource: NtmBusinessinputResource
- name: ntm-Representativeinput
  model: NtmRepresentativeinput
  resource: NtmRepresentativeinputResource
- name: ntm-Managerinput
  model: NtmManagerinput
  resource: NtmManagerinputResource
- name: ntm-Paperinput
  model: NtmPaperinput
  resource: NtmPaperinputResource
- name: ntm-destConfig
  model: NtmDestConfig
  resource: NtmDestConfigResource
- name: ntm-scenario
  model: NtmScenario
  resource: NtmScenarioResource
- name: ntm-proposal
  model: NtmProposal
  resource: NtmProposalResource
- name: ntm-useable-proposal
  model: NtmUseableProposal
  resource: NtmUseableProposalResource
- name: ntm-paper
  model: NtmPaper
  resource: NtmPaperResource
- name: ntm-sales-config
  model: NtmSalesConfig
  resource: NtmSalesConfigResource
- name: ntm-sales-report
  model: NtmSalesReport
  resource: NtmSalesReportResource
- name: ntm-hospital-sales-report
  model: NtmHospitalSalesReport
  resource: NtmHospitalSalesReportResource
- name: ntm-product-sales-report
  model: NtmProductSalesReport
  resource: NtmProductSalesReportResource
- name: ntm-representative-sales-report
  model: NtmRepresentativeSalesReport
  resource: NtmRepresentativeSalesReportResource
- name: ntm-team-config
  model: NtmTeamConfig
  resource: NtmTeamConfigResource
- name: ntm-action-kpi
  model: NtmActionKpi
  resource: NtmActionKpiResource
- name: ntm-representative-ability
  model: NtmRepresentativeAbility
  resource: NtmRepresentativeAbilityResource
- name: ntm-personnel-assessment
  model: NtmPersonnelAssessment
  resource: NtmPersonnelAssessmentResource
- name: ntm-level
  model: NtmLevel
  resource: NtmLevelResource
- name: ntm-level-config
  model: NtmLevelConfig
  resource: NtmLevelConfigResource
- name: ntm-assessment-report-describe
  model: NtmAssessmentReportDescribe
  resource: NtmAssessmentReportDescribeResource
- name: ntm-regional-division-result
  model: NtmRegionalDivisionResult
  resource: NtmRegionalDivisionResultResource
- name: ntm-target-assigns-result
  model: NtmTargetAssignsResult
  resource: NtmTargetAssignsResultResource
- name: ntm-resource-assigns-result
  model: NtmResourceAssignsResult
  resource: NtmResourceAssignsResultResource
- name: ntm-manage-time-result
  model: NtmManageTimeResult
  resource: NtmManageTimeResultResource
- name: ntm-manage-team-result
  model: NtmManageTeamResult
  resource: NtmManageTeamResultResource
- name: ntm-assessment-report
  model: NtmAssessmentReport
  resource: NtmAssessmentReportResource
- name: ntm-title
  model: NtmTitle
  resource: NtmTitleResource
- name: ntm-general-performance-result
  model: NtmGeneralPerformanceResult
  resource: NtmGeneralPerformanceResultResource





functions:
- name: NtmGeneratePaperHandler
  create: NewGeneratePaperHandler
  daemons:
  - BmMongodbDaemon
  - BmRedisDaemon
  method: GeneratePaper
  http: POST
  args:
  - papers
- name: NtmCallRHandler
  create: NewCallRHandler
  daemons:
  - BmMongodbDaemon
  - BmRedisDaemon
  method: CallRCalculate
  http: POST
  args:
#  - docker.for.mac.host.internal:8000
  - ntm_r_calc:8000
  - ntm

middlewares:
- name: NtmCheckTokenMiddleware
  create: NewCheckTokenMiddleware
  daemons:
  - BmRedisDaemon
  args:
  - oauth.pharbers.com
panic:
  name: NtmCommonPanicHandle
  create: NewCommonPanicHandle

daemons:
  - name: BmMongodbDaemon
    method: NewMongoDBDaemon
    args:
      host: primary
      port: 27017
      user: pharbers
      pass: pharbers2019
      database: pharbers-ntm-client
  - name: BmRedisDaemon
    method: NewRedisDBDaemon
    args:
      host: redis
      port: 6379
      password: pharbers
      database: 0
